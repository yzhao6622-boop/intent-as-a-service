# 阿里云 Windows 部署检查清单

## ✅ 部署前检查

- [ ] 服务器已购买并配置
- [ ] 已获取服务器 IP 地址
- [ ] 已配置安全组规则（开放 3002, 5173 端口）
- [ ] 已安装 Node.js 18+
- [ ] 已安装 Git
- [ ] 代码已上传到服务器

## ✅ 环境配置

- [ ] `.env` 文件已创建
- [ ] `JWT_SECRET` 已配置（强随机字符串）
- [ ] `ARK_API_KEY` 已配置
- [ ] `ARK_MODEL_ID` 已配置
- [ ] `PORT` 已设置（默认 3002）
- [ ] `NODE_ENV=production` 已设置

## ✅ 依赖安装

- [ ] 后端依赖已安装（`npm install`）
- [ ] 前端依赖已安装（`cd client && npm install`）
- [ ] 无安装错误

## ✅ 数据库初始化

- [ ] 已运行 `npm run migrate`
- [ ] 数据库文件已创建（`data/intent.db`）
- [ ] 数据库目录有写入权限

## ✅ 构建应用

- [ ] 后端已构建（`npm run build:server`）
- [ ] 前端已构建（`npm run build:client`）
- [ ] 构建无错误

## ✅ 服务启动

- [ ] 已选择进程管理方式（PM2 / NSSM / 直接运行）
- [ ] 服务已启动
- [ ] 无启动错误

## ✅ 防火墙配置

- [ ] Windows 防火墙已配置
- [ ] 阿里云安全组已配置
- [ ] 端口已开放（3002, 5173）

## ✅ 功能测试

- [ ] 健康检查通过（`http://your-ip:3002/health`）
- [ ] 前端可访问（`http://your-ip:5173`）
- [ ] 注册功能正常
- [ ] 登录功能正常
- [ ] 创建意图功能正常
- [ ] AI 功能正常

## ✅ 监控和维护

- [ ] 日志查看方式已了解
- [ ] 更新流程已熟悉
- [ ] 备份策略已制定

## ✅ 安全配置

- [ ] 强密码已设置
- [ ] 端口已配置
- [ ] HTTPS 已配置（可选）
- [ ] 访问限制已配置（可选）

---

## 🚨 常见问题快速检查

如果遇到问题，按以下顺序检查：

1. **服务无法启动**
   - [ ] 检查端口是否被占用
   - [ ] 检查环境变量是否正确
   - [ ] 查看错误日志

2. **无法访问**
   - [ ] 检查防火墙规则
   - [ ] 检查安全组配置
   - [ ] 检查服务是否运行

3. **API 调用失败**
   - [ ] 检查环境变量（ARK_API_KEY 等）
   - [ ] 检查网络连接
   - [ ] 查看 API 日志

4. **数据库错误**
   - [ ] 检查数据库文件权限
   - [ ] 检查数据库路径
   - [ ] 重新运行 migrate

---

## 📞 需要帮助？

如果所有检查项都完成但仍有问题：

1. 查看应用日志
2. 检查 Windows 事件查看器
3. 查看 PM2 日志（如果使用）
4. 检查网络连接
5. 联系技术支持
