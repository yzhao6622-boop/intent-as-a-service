# 功能说明

## 已实现的核心功能

### 1. 用户认证系统 ✅
- 用户注册（邮箱+密码）
- 用户登录（JWT认证）
- 自动登录状态保持
- 路由保护（需要登录才能访问）

### 2. 意图创建与管理 ✅
- **AI意图挖掘**：用户输入自然语言描述，AI自动分析并生成：
  - 意图标题
  - 详细描述
  - 意图类别（职业转型/医疗决策/大额消费/关系决策/学习成长）
  - 合理时间窗口（天数）
  - 可信度指标
  
- **意图档案生成**：自动创建包含以下内容的完整档案：
  - 意图基本信息
  - 阶段拆解（3-6个阶段，每个阶段包含验证点）
  - 初始可信度评分

### 3. AI意图验证系统 ✅
- **意图验证**：AI作为审计员，分析：
  - 用户是否表现出真实行动迹象
  - 是否有拖延、犹豫、偏航迹象
  - 可信度评分（0-100）
  - 需要关注的担忧点
  
- **验证记录**：保存每次验证的详细分析结果

### 4. 意图演进追踪 ✅
- **阶段追踪**：AI分析当前处于哪个阶段
- **进展百分比**：计算整体进展
- **下一个里程碑**：预测和建议
- **动态更新**：自动更新意图的当前阶段

### 5. AI对话系统 ✅
- **意图审计员角色**：AI扮演严格的审计员
- **对话记忆**：保存历史对话上下文
- **质疑与支持**：AI会：
  - 反复质疑用户动机
  - 捕捉犹豫和拖延
  - 提供支持但不让用户感到被冒犯
  - 动态调整"真实意图"的定义

### 6. 意图市场 ✅
- **发布意图**：用户可以将已验证的意图发布到市场
- **浏览市场**：按类别、可信度筛选
- **购买/订阅**：其他用户可以购买或订阅已验证的意图
- **交易记录**：保存交易历史

### 7. 意图状态管理 ✅
- 支持状态：active（进行中）、completed（已完成）、abandoned（已放弃）、paused（已暂停）
- 状态更新API

### 8. 数据可视化 ✅
- **仪表板**：显示所有意图列表
- **意图卡片**：展示关键信息（标题、描述、可信度、状态、类别）
- **详情页面**：完整的意图档案展示
- **进展可视化**：进度条、阶段完成状态

## 数据库设计

### 核心表结构
1. **users** - 用户表
2. **intents** - 意图表
3. **intent_stages** - 意图阶段拆解表
4. **verification_records** - 验证记录表
5. **ai_conversations** - AI对话记录表
6. **intent_marketplace** - 意图市场表
7. **intent_progress** - 意图进展追踪表

## API端点

### 认证
- `POST /api/auth/register` - 注册
- `POST /api/auth/login` - 登录

### 意图管理
- `POST /api/intents/create` - 创建意图（AI挖掘）
- `GET /api/intents/list` - 获取我的意图列表
- `GET /api/intents/:id` - 获取意图详情（完整档案）
- `POST /api/intents/:id/verify` - 验证意图
- `POST /api/intents/:id/track` - 追踪意图演进
- `PATCH /api/intents/:id/status` - 更新意图状态

### AI对话
- `POST /api/ai/chat/:intentId` - 与AI对话

### 市场
- `POST /api/marketplace/publish/:intentId` - 发布到市场
- `GET /api/marketplace/browse` - 浏览市场
- `POST /api/marketplace/purchase/:marketplaceId` - 购买/订阅

## 前端页面

1. **登录/注册页** (`/login`)
2. **仪表板** (`/dashboard`) - 意图列表
3. **意图详情页** (`/intent/:id`) - 完整档案+AI对话
4. **市场页** (`/marketplace`) - 浏览和购买意图

## AI能力

### 使用的AI模型
- 火山方舟（Ark）模型（用于所有AI功能）
- 支持DeepSeek V3、R1等模型
- 可通过环境变量 `ARK_MODEL_ID` 配置使用的模型

### AI功能模块
1. **意图挖掘** (`mineIntent`)
2. **意图验证** (`verifyIntent`)
3. **意图演进追踪** (`trackIntentEvolution`)
4. **AI对话** (`chatWithAI`)
5. **阶段生成** (`generateIntentStages`)

## 技术亮点

1. **全栈TypeScript**：前后端统一类型系统
2. **AI深度集成**：多个AI功能模块，结构化输出
3. **实时对话**：WebSocket风格的实时AI对话体验
4. **数据完整性**：完整的数据库设计和关系
5. **现代化UI**：Tailwind CSS，响应式设计
6. **安全认证**：JWT + bcrypt密码加密

## 待扩展功能（未来）

1. **意图保险**：如果AI判断未执行，退费机制
2. **行为验证**：集成外部数据源验证用户行为
3. **意图推荐**：基于相似意图的推荐系统
4. **数据分析**：意图→行为→结果→反悔率的数据分析
5. **API开放**：To B的Intent API服务
6. **支付集成**：真实的支付系统
7. **通知系统**：邮件/短信提醒
8. **移动端**：React Native应用

## 使用示例

### 创建意图示例
```
用户输入："我打算在90天内，从零基础转行做前端工程师"

AI生成：
- 标题：从零基础转行前端工程师
- 类别：职业转型
- 时间窗口：90天
- 阶段拆解：
  1. 基础学习阶段（HTML/CSS/JavaScript）
  2. 框架学习阶段（React/Vue）
  3. 项目实践阶段
  4. 简历准备和投递阶段
  5. 面试准备阶段
```

### AI验证示例
```
AI分析：
- 可信度评分：75分
- 分析：用户表现出较强的学习意愿，已制定时间表
- 担忧：需要验证是否真的开始执行学习计划
- 建议：设置每周学习目标，定期验证进展
```
