# é˜¿é‡Œäº‘ Windows å¿«é€Ÿéƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰

## ğŸš€ è¶…å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. è¿æ¥æœåŠ¡å™¨

ä½¿ç”¨è¿œç¨‹æ¡Œé¢ï¼ˆRDPï¼‰è¿æ¥åˆ°æ‚¨çš„é˜¿é‡Œäº‘ Windows æœåŠ¡å™¨ã€‚

### 2. å®‰è£… Node.js

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® https://nodejs.org/
2. ä¸‹è½½ Windows å®‰è£…åŒ…ï¼ˆLTS ç‰ˆæœ¬ï¼‰
3. è¿è¡Œå®‰è£…ï¼Œä¸€è·¯"ä¸‹ä¸€æ­¥"
4. æ‰“å¼€ PowerShellï¼ŒéªŒè¯ï¼š
   ```powershell
   node --version
   npm --version
   ```

### 3. ä¸Šä¼ ä»£ç 

#### æ–¹å¼1ï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰

```powershell
# å®‰è£… Gitï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
# ä¸‹è½½ï¼šhttps://git-scm.com/download/win

# å…‹éš†ä»£ç 
cd D:\
git clone https://github.com/your-username/intent-as-a-service.git
cd intent-as-a-service
```

#### æ–¹å¼2ï¼šä½¿ç”¨ FTP ä¸Šä¼ 

ä½¿ç”¨ FileZilla æˆ–å…¶ä»–å·¥å…·ä¸Šä¼ é¡¹ç›®æ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨ã€‚

### 4. è¿è¡Œéƒ¨ç½²è„šæœ¬

```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd D:\intent-as-a-service

# è¿è¡Œéƒ¨ç½²è„šæœ¬
.\deploy-windows.ps1
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… å®‰è£…ä¾èµ–
- âœ… æ£€æŸ¥ç¯å¢ƒå˜é‡
- âœ… åˆå§‹åŒ–æ•°æ®åº“
- âœ… æ„å»ºåº”ç”¨
- âœ… å®‰è£… PM2
- âœ… å¯åŠ¨åº”ç”¨

### 5. é…ç½®ç¯å¢ƒå˜é‡

å¦‚æœ `.env` æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šåˆ›å»ºã€‚è¯·ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
PORT=3002
NODE_ENV=production
JWT_SECRET=ç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²
ARK_API_KEY=ä½ çš„APIå¯†é’¥
ARK_MODEL_ID=ä½ çš„æ¨¡å‹ID
ARK_API_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
```

### 6. é…ç½®é˜²ç«å¢™

#### Windows é˜²ç«å¢™

1. æ‰“å¼€"Windows Defender é˜²ç«å¢™"
2. é«˜çº§è®¾ç½® â†’ å…¥ç«™è§„åˆ™ â†’ æ–°å»ºè§„åˆ™
3. ç«¯å£ â†’ TCP â†’ 3002, 5173
4. å…è®¸è¿æ¥

#### é˜¿é‡Œäº‘å®‰å…¨ç»„

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. ECS â†’ å®‰å…¨ç»„ â†’ é…ç½®è§„åˆ™
3. æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - ç«¯å£ï¼š3002ï¼ˆåç«¯ï¼‰
   - ç«¯å£ï¼š5173ï¼ˆå‰ç«¯ï¼‰
   - åè®®ï¼šTCP
   - æˆæƒå¯¹è±¡ï¼š0.0.0.0/0

### 7. è®¿é—®åº”ç”¨

- åç«¯ï¼š`http://your-server-ip:3002`
- å‰ç«¯ï¼š`http://your-server-ip:5173`
- å¥åº·æ£€æŸ¥ï¼š`http://your-server-ip:3002/health`

---

## ğŸ“‹ æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¦‚æœè„šæœ¬å¤±è´¥ï¼‰

### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–

```powershell
npm install
cd client
npm install
cd ..
```

### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒ

```powershell
copy env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶
notepad .env
```

### æ­¥éª¤3ï¼šåˆå§‹åŒ–æ•°æ®åº“

```powershell
npm run migrate
```

### æ­¥éª¤4ï¼šæ„å»º

```powershell
npm run build
```

### æ­¥éª¤5ï¼šå¯åŠ¨

```powershell
# ä½¿ç”¨ PM2ï¼ˆæ¨èï¼‰
npm install -g pm2
pm2 start ecosystem.config.js
pm2 save

# æˆ–ç›´æ¥è¿è¡Œ
npm start
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### PM2 ç®¡ç†

```powershell
pm2 status              # æŸ¥çœ‹çŠ¶æ€
pm2 logs                # æŸ¥çœ‹æ—¥å¿—
pm2 restart intent-api  # é‡å¯
pm2 stop intent-api     # åœæ­¢
pm2 delete intent-api   # åˆ é™¤
```

### æ›´æ–°åº”ç”¨

```powershell
git pull
npm install
cd client && npm install && cd ..
npm run build
pm2 restart intent-api
```

---

## âœ… éªŒè¯éƒ¨ç½²

1. **å¥åº·æ£€æŸ¥**
   ```powershell
   Invoke-WebRequest -Uri "http://localhost:3002/health"
   ```

2. **æµ‹è¯•æ³¨å†Œ**
   åœ¨æµè§ˆå™¨è®¿é—®å‰ç«¯ï¼Œå°è¯•æ³¨å†Œè´¦æˆ·

3. **æµ‹è¯• API**
   ```powershell
   Invoke-WebRequest -Uri "http://localhost:3002/api/auth/register" `
     -Method POST `
     -ContentType "application/json" `
     -Body '{"email":"test@test.com","password":"test123"}'
   ```

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

1. **ç«¯å£è¢«å ç”¨**
   ```powershell
   netstat -ano | findstr :3002
   taskkill /F /PID <è¿›ç¨‹ID>
   ```

2. **æ— æ³•è®¿é—®**
   - æ£€æŸ¥é˜²ç«å¢™
   - æ£€æŸ¥å®‰å…¨ç»„
   - æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ

3. **æŸ¥çœ‹æ—¥å¿—**
   ```powershell
   pm2 logs
   # æˆ–
   Get-Content .\logs\err.log
   ```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹ `é˜¿é‡Œäº‘Windowséƒ¨ç½²æŒ‡å—.md` è·å–å®Œæ•´æ–‡æ¡£ã€‚
